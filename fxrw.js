(()=>{var t,x="1368050";function e(t,e=5e3){let a=document.getElementById("fox-toast");a||((a=document.createElement("div")).id="fox-toast",a.style.position="fixed",a.style.top="20px",a.style.right="20px",a.style.backgroundColor="rgba(0, 0, 0, 0.8)",a.style.color="white",a.style.padding="10px 20px",a.style.borderRadius="5px",a.style.fontSize="14px",a.style.zIndex="9999",a.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.3)",a.style.opacity="0",a.style.transition="opacity 0.5s",document.body.appendChild(a)),a.innerText=t,a.style.opacity="1",0<e&&setTimeout(function(){a.style.opacity="0"},e)}"www.douyu.com"!=location.hostname?(console.log("Not supported in the page."),alert("当前页面不支持的说.")):(t=location.pathname.endsWith("/")?location.pathname.substr(0,location.pathname.length-1):location.pathname,t=new URLSearchParams(location.search).get("rid")||t.substr(t.lastIndexOf("/")+1),0<=location.href.indexOf(x)&&(t=x),console.log("当前Room: "+t),(async(t="1368050")=>{t="https://www.douyu.com/lapi/interact/polling/risingStarsRoomInfo?room_id="+(t=t||x);try{var e=await fetch(t);if(200===e.status){var a=(await e.json()).data,o=a.rid,n=a.star,i=new Date(a.time).toISOString().replace("T"," ").substr(0,19),s=a.current,l=parseInt(a.max1)-parseInt(a.cur1),c=parseInt(a.max2)-parseInt(a.cur2),d=0<l?`(${l})`:"",p=0<c?`(${c})`:"",u=a.list,y=[`房间[${o}]一周福星: `+i],h=["一","二","三","四","五","六","日"],m=[];for(let t=1;t<=7;t++)t<=s&&m.push(`周${h[t-1]}(${u[String(t)]}星${t===s?"*":""})`);return(y.push(m.join("  ")),0<l||0<c)?`当前周${h[s-1]}(${n+1}星挑战)：人数:${a.cur1}/${a.max1}${d}  贡献:${a.cur2}/`+a.max2+p:(r=y.join("\n"),console.log(r),r)}}catch(t){console.error(t)}return""})(t).then(t=>{t=t,document.querySelector("#js-player-asideMain div.ChatSend > .ChatSend-button")?(input=document.querySelector("#js-player-asideMain div.ChatSend > textarea.ChatSend-txt"),e(t),input.value=t,document.querySelector("#js-player-asideMain div.ChatSend > .ChatSend-button").click()):e(t)}))})();
